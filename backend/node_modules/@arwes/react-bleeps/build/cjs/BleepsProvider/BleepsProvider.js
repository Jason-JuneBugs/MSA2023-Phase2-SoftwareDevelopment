"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.BleepsProvider = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importStar(require("react"));
const bleeps_1 = require("@arwes/bleeps");
const BleepsManagerContext_1 = require("../internal/BleepsManagerContext");
const BleepsProvider = (props) => {
    const { master, common, categories, bleeps, children } = props;
    // The bleeps is created once with the provided bleep names.
    const bleepsManager = (0, react_1.useMemo)(() => (0, bleeps_1.createBleepsManager)({ master, common, categories, bleeps }), []);
    (0, react_1.useEffect)(() => {
        bleepsManager === null || bleepsManager === void 0 ? void 0 : bleepsManager.update({ master, common, categories, bleeps });
    }, [master, common, categories, bleeps]);
    (0, react_1.useEffect)(() => {
        return () => {
            bleepsManager === null || bleepsManager === void 0 ? void 0 : bleepsManager.unload();
        };
    }, []);
    return (react_1.default.createElement(BleepsManagerContext_1.BleepsManagerContext.Provider, { value: bleepsManager }, children));
};
exports.BleepsProvider = BleepsProvider;
