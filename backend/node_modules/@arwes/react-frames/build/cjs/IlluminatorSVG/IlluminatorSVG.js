"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.IlluminatorSVG = void 0;
const tslib_1 = require("tslib");
const react_1 = tslib_1.__importStar(require("react"));
const tools_1 = require("@arwes/tools");
const IlluminatorSVG = (props) => {
    const { color = 'hsl(0 0% 50% / 5%)', size = 300, className, style } = props;
    const gradientId = (0, react_1.useId)();
    const circleElementRef = (0, react_1.useRef)(null);
    (0, react_1.useEffect)(() => {
        var _a;
        const element = circleElementRef.current;
        const svg = (_a = element.parentElement) === null || _a === void 0 ? void 0 : _a.parentElement; // TODO:
        element.style.transform = `translate(-${size / 2}px, -${size / 2}px)`;
        const onMove = (event) => {
            const bounds = svg.getBoundingClientRect();
            const x = event.clientX - bounds.left + (size / 2);
            const y = event.clientY - bounds.top + (size / 2);
            element.style.opacity = '1';
            element.setAttribute('cx', String(x));
            element.setAttribute('cy', String(y));
        };
        const onHide = () => {
            element.style.opacity = '0';
        };
        document.addEventListener('mousemove', onMove);
        document.addEventListener('mouseleave', onHide);
        return () => {
            document.removeEventListener('mousemove', onMove);
            document.removeEventListener('mouseleave', onHide);
        };
    }, [color, size]);
    return (react_1.default.createElement("g", { className: (0, tools_1.cx)('arwes-react-frames-illuminatorsvg', className), style: {
            pointerEvents: 'none',
            ...style
        } },
        react_1.default.createElement("defs", null,
            react_1.default.createElement("radialGradient", { id: gradientId },
                react_1.default.createElement("stop", { offset: '0%', stopColor: color }),
                react_1.default.createElement("stop", { offset: '100%', stopColor: 'transparent' }))),
        react_1.default.createElement("circle", { ref: circleElementRef, r: size / 2, style: {
                position: 'absolute',
                transition: 'opacity 200ms ease-out',
                opacity: 0
            }, fill: `url(#${gradientId})` })));
};
exports.IlluminatorSVG = IlluminatorSVG;
